'use strict';function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var _require=require('path'),resolve=_require.resolve;var StringReplacePlugin=require('string-replace-webpack-plugin');var convertLanguageToISO=require('./helpers/convertLanguageToISO');var getExtensionsNodeModulesPaths=require('./helpers/getExtensionsNodeModulesPaths');var AppSettings=require('../../AppSettings');var _require2=require('../environment'),isDev=_require2.isDev;var themes=require('../Themes');var appSettings=AppSettings.getInstance().getAppSettings();var THEME_PATH=themes.getPath();var LANG=convertLanguageToISO(appSettings.language);var NODE_MODULES='node_modules';var LOCAL_NODE_MODULES=resolve(process.env.SDK_PATH,NODE_MODULES);var stringReplacementLoader=StringReplacePlugin.replace({replacements:[{pattern:/__PROJECT_PATH__/g,replacement:function replacement(){return JSON.stringify(THEME_PATH)}}]});module.exports={context:resolve(THEME_PATH),devServer:{hot:true,headers:{'Access-Control-Allow-Origin':'*'},publicPath:'/',contentBase:resolve(THEME_PATH,'public'),progress:true},entry:{common:[resolve(LOCAL_NODE_MODULES,'babel-polyfill'),resolve(LOCAL_NODE_MODULES,'intl'),resolve(LOCAL_NODE_MODULES,'intl/locale-data/jsonp/'+LANG+'.js'),'react','react-dom',resolve(__dirname,'./helpers/polyfill')]},externals:{cheerio:'window','react/lib/ExecutionEnvironment':true,'react/lib/ReactContext':true},module:{rules:[{test:/\.css$/,use:[resolve(LOCAL_NODE_MODULES,'style-loader'),resolve(LOCAL_NODE_MODULES,'css-loader')]},{test:/\.json$/,use:[resolve(LOCAL_NODE_MODULES,'json-loader')]},{test:/\.svg$/,use:[resolve(LOCAL_NODE_MODULES,'svg-inline-loader')]},{test:/\.ejs/,use:[resolve(LOCAL_NODE_MODULES,'ejs-loader')]},{test:/\.(js|jsx)$/,exclude:[resolve(process.env.SDK_PATH),resolve(process.env.SDK_PATH,'bin')],use:[stringReplacementLoader,resolve(LOCAL_NODE_MODULES,'cache-loader'),{loader:resolve(LOCAL_NODE_MODULES,'babel-loader'),options:{compact:true,comments:!!isDev,sourceRoot:THEME_PATH,cacheDirectory:!isDev}}]}]},resolve:{extensions:['.json','.js','.jsx'],modules:[resolve(THEME_PATH,NODE_MODULES),resolve(process.env.SDK_PATH,NODE_MODULES)].concat(_toConsumableArray(getExtensionsNodeModulesPaths()))},performance:{hints:false},target:'web',watchOptions:{ignored:/node_modules\b(?!\/@shopgate)\b.*/}};